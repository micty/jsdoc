!function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){z.use("$");var C=function(){var a=z.require("Module"),b=new a({seperator:"/",crossover:!0});return{define:b.define.bind(b),require:b.require.bind(b),expose:b.expose.bind(b),exposes:b.exposes.bind(b),modules:b.modules.bind(b),bind:function(a,c,d){return function(){var e=b.require(a),f=[].slice.call(arguments,0);d=d===!0?e:d,e[c].apply(d||null,f)}}}}(),D=C.define,E=C.require;D("$",function(){return y}),D("MiniQuery",function(){return z}),D("IScroll",function(){return A}),D("KISP",function(a,b,c){var d=null;b.exports=c={name:"default",version:"2.4.0",files:["partial/default/begin.js","core/Module.js","core/$.js","core/MiniQuery.js","core/IScroll.js","core/KISP.js","compatible/jquery/animate.js","crypto/MD5.js","excore/Config.js","excore/Config/Url.js","excore/Edition.js","excore/File.js","excore/Fn.js","excore/JSON.js","excore/Mapper.js","excore/Module.js","excore/Seajs.js","excore/Url.js","api/API.js","api/API/Ajax.js","api/SSH.js","api/SSH/Ajax.js","api/SSH/Server.js","api/SSH/Server/Config.js","api/SSH.API.js","api/SSH.API/Ajax.js","api/Proxy.js","cloud-home/CloudHome.API.js","cloud-home/CloudHome.js","cloud-home/CloudHome.Native.js","ui/Mask.js","ui/Navigator.js","ui/Scroller/pull.js","ui/Scroller.js","ui/Template.js","jquery-plugin/touch.js","partial/default/expose.js","partial/default/defaults.js","partial/default/end.js"],modules:[],exposes:[],require:function(b){return C.expose(b)?a(b):null},proxy:C.bind("Proxy","response"),config:function(b,c){var d=a("Config");return"string"==typeof b&&1==arguments.length?d.get(b):void d.set(b,c)},data:function(b,c){if(!d){var e=a("Config");d=new e}return"object"==typeof b?void d.set(b):1==arguments.length?d.get(b):void d.set(b,c)}}}),function(a){var b=a("$");b.fn.fadeOut||b.each({fadeIn:{opacity:1},fadeOut:{opacity:0},fadeToggle:{opacity:"toggle"}},function(a,c){b.fn[a]=function(a,b,d){return this.animate(c,a,b,d)}})}(C.require),D("MD5",function(){function a(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var h=1732584193,i=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=h,n=i,p=j,q=k;h=c(h,i,j,k,a[l+0],7,-680876936),k=c(k,h,i,j,a[l+1],12,-389564586),j=c(j,k,h,i,a[l+2],17,606105819),i=c(i,j,k,h,a[l+3],22,-1044525330),h=c(h,i,j,k,a[l+4],7,-176418897),k=c(k,h,i,j,a[l+5],12,1200080426),j=c(j,k,h,i,a[l+6],17,-1473231341),i=c(i,j,k,h,a[l+7],22,-45705983),h=c(h,i,j,k,a[l+8],7,1770035416),k=c(k,h,i,j,a[l+9],12,-1958414417),j=c(j,k,h,i,a[l+10],17,-42063),i=c(i,j,k,h,a[l+11],22,-1990404162),h=c(h,i,j,k,a[l+12],7,1804603682),k=c(k,h,i,j,a[l+13],12,-40341101),j=c(j,k,h,i,a[l+14],17,-1502002290),i=c(i,j,k,h,a[l+15],22,1236535329),h=d(h,i,j,k,a[l+1],5,-165796510),k=d(k,h,i,j,a[l+6],9,-1069501632),j=d(j,k,h,i,a[l+11],14,643717713),i=d(i,j,k,h,a[l+0],20,-373897302),h=d(h,i,j,k,a[l+5],5,-701558691),k=d(k,h,i,j,a[l+10],9,38016083),j=d(j,k,h,i,a[l+15],14,-660478335),i=d(i,j,k,h,a[l+4],20,-405537848),h=d(h,i,j,k,a[l+9],5,568446438),k=d(k,h,i,j,a[l+14],9,-1019803690),j=d(j,k,h,i,a[l+3],14,-187363961),i=d(i,j,k,h,a[l+8],20,1163531501),h=d(h,i,j,k,a[l+13],5,-1444681467),k=d(k,h,i,j,a[l+2],9,-51403784),j=d(j,k,h,i,a[l+7],14,1735328473),i=d(i,j,k,h,a[l+12],20,-1926607734),h=e(h,i,j,k,a[l+5],4,-378558),k=e(k,h,i,j,a[l+8],11,-2022574463),j=e(j,k,h,i,a[l+11],16,1839030562),i=e(i,j,k,h,a[l+14],23,-35309556),h=e(h,i,j,k,a[l+1],4,-1530992060),k=e(k,h,i,j,a[l+4],11,1272893353),j=e(j,k,h,i,a[l+7],16,-155497632),i=e(i,j,k,h,a[l+10],23,-1094730640),h=e(h,i,j,k,a[l+13],4,681279174),k=e(k,h,i,j,a[l+0],11,-358537222),j=e(j,k,h,i,a[l+3],16,-722521979),i=e(i,j,k,h,a[l+6],23,76029189),h=e(h,i,j,k,a[l+9],4,-640364487),k=e(k,h,i,j,a[l+12],11,-421815835),j=e(j,k,h,i,a[l+15],16,530742520),i=e(i,j,k,h,a[l+2],23,-995338651),h=f(h,i,j,k,a[l+0],6,-198630844),k=f(k,h,i,j,a[l+7],10,1126891415),j=f(j,k,h,i,a[l+14],15,-1416354905),i=f(i,j,k,h,a[l+5],21,-57434055),h=f(h,i,j,k,a[l+12],6,1700485571),k=f(k,h,i,j,a[l+3],10,-1894986606),j=f(j,k,h,i,a[l+10],15,-1051523),i=f(i,j,k,h,a[l+1],21,-2054922799),h=f(h,i,j,k,a[l+8],6,1873313359),k=f(k,h,i,j,a[l+15],10,-30611744),j=f(j,k,h,i,a[l+6],15,-1560198380),i=f(i,j,k,h,a[l+13],21,1309151649),h=f(h,i,j,k,a[l+4],6,-145523070),k=f(k,h,i,j,a[l+11],10,-1120210379),j=f(j,k,h,i,a[l+2],15,718787259),i=f(i,j,k,h,a[l+9],21,-343485551),h=g(h,m),i=g(i,n),j=g(j,p),k=g(k,q)}return o(h,i,j,k)}function b(a,b,c,d,e,f){return g(h(g(g(b,a),g(d,f)),e),c)}function c(a,c,d,e,f,g,h){return b(c&d|~c&e,a,c,f,g,h)}function d(a,c,d,e,f,g,h){return b(c&e|d&~e,a,c,f,g,h)}function e(a,c,d,e,f,g,h){return b(c^d^e,a,c,f,g,h)}function f(a,c,d,e,f,g,h){return b(d^(c|~e),a,c,f,g,h)}function g(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function h(a,b){return a<<b|a>>>32-b}function i(a){for(var b=o(),c=(1<<l)-1,d=0;d<a.length*l;d+=l)b[d>>5]|=(a.charCodeAt(d/l)&c)<<d%32;return b}function j(a){for(var b=k?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}var k=0,l=8;return{encrypt:function(b){return arguments.length>1&&(b=o.prototype.slice.call(arguments,0).join("")),j(a(i(b),b.length*l))}}}),D("Config",function(a,b){function c(){f.setGuid(this);var a={name$config:{},name$formatted:{}};g.set(this,a)}var d=a("$"),e=a("MiniQuery"),f=e.require("Mapper"),g=new f;c.prototype={constructor:c,set:function(a,b){function c(a,b){var c=f[a];return c?d.Object.extend(c,b):c=f[a]=b,h[a]=!1,c}var e=g.get(this),f=e.name$config,h=e.name$formatted;"object"==typeof a?d.Object.each(a,function(a,b){c(a,b)}):c(a,b)},get:function(c){var d=g.get(this),e=d.name$config,f=d.name$formatted;"object"==typeof c&&(c=c.id);var h=e[c];if("Url"==c)return h;var i=f[c];if(!i){var j=a(b,"Url");h=j.format(h),e[c]=h,f[c]=!0}return h},clone:function(a){var b=this.get(a),c=[].slice.call(arguments,1);return c=[{},b].concat(c),d.Object.extendDeeply.apply(null,c)}};var h=new c;return d.Object.extend(c,{get:h.get.bind(h),set:h.set.bind(h),clone:h.clone.bind(h)})}),D("Config/Url",function(a){function b(b){var d=a("Url");return c.Object.map(b,function(a,b){return"string"==typeof b?d.format(b):b instanceof o?c.Array.keep(b,function(a){return"string"==typeof a?d.format(a):"object"==typeof a?formatUrl(a):a},!0):b},!0)}var c=a("$");return{format:b}}),D("Edition",function(a){var b=(a("$"),"debug");return{get:function(){return b},set:function(a){b=a}}}),D("File",function(){function a(a,b){return"string"!=typeof a||"string"!=typeof b?!1:a.slice(0-b.length).toLowerCase()==b.toLowerCase()}function b(b){return a(b,".js")}function c(b){return a(b,".css")}function d(b){return a(b,".json")}return{is:a,isJs:b,isCss:c,isJson:d}}),D("Fn",function(a,b,c){var d=a("$");b.exports=c={delay:function(a,b,c){if(b){if(!a)return void b.apply(null,c);var e=d.Math.randomInt(a.min,a.max);return l(function(){b.apply(null,c)},e)}}}}),D("JSON",function(a,b,c){var e=d.JSON;b.exports=c={parse:function(a){try{return e.parse(a)}catch(b){}try{return a=a.replace(/^(\r\n)+/g,""),new s("return "+a)()}catch(b){}return null},stringify:function(a,b){return b===B&&(b=4),e.stringify(a,null,b)}}}),D("Mapper",function(a){var b=a("$"),c=a("MiniQuery"),d=c.require("Mapper"),e=new d;return{get:function(a){return e.get(a)},set:function(a,b){e.set(a,b)},setGuid:function(a,c){var e=c.id;e=e+"-"+b.String.random(),d.setGuid(a,e)}}}),D("Module",function(a,b){var c=a("MiniQuery"),d=c.require("Module"),e=a("Config"),f=e.get(b),g=new d(f);return{define:g.define.bind(g),require:g.require.bind(g)}}),D("Seajs",function(a,b,c){function e(a){if(h)return void(a&&a(h));var c=g.get(b.id),e=c.url,i=f.require("Script");i.load({url:e,id:"seajsnode",onload:function(){h=d.seajs,h.config(c),a&&a(h)}})}var f=(a("$"),a("MiniQuery")),g=a("Config"),h=d.seajs;b.exports=c={use:function(){var a=[].slice.call(arguments,0);e(function(b){b.use.apply(b,a)})},define:function(){var a=[].slice.call(arguments,0);e(function(b){b.Module.define.apply(b,a)})}}}),D("Url",function(a,b,c){function d(){var d=f.get(b.id),e={},g=d.replacer;if(!g)return e;var h=g.root;if(h&&(e[h]=c.root()),h=g.edition){var i=a("Edition");e[h]=i.get()}return e}var e=a("$"),f=a("Config");b.exports=c={root:function(){var a=f.get(b.id);return a.root},checkFull:function(a){return"string"!=typeof a?!1:0==a.indexOf("http://")||0==a.indexOf("https://")},format:function(a,b){if("object"!=typeof b){var c=[].slice.call(arguments,1);b=e.Array.toObject(c),delete b.length}var f=d();return b=b?e.Object.extend(b,f):f,e.String.format(a,b)}}}),D("API",function(a,b){function c(a,c){a=a||"",c=g.clone(b.id,c),i.setGuid(this,b);var e=new f(this),j=c.successCode,k=c.proxy;"object"==typeof k&&(k=k[a]);var l={name:a,data:c.data,query:c.query,url:c.url||"",ext:c.ext||"",successCode:j,field:c.field,proxy:k,serialize:c.serialize,success:function(a,b,c){n.fireEvent("success",[a,b,c])},fail:function(a,b,c,d){n.fireEvent("fail",[a,b,c,d])},error:function(a){n.fireEvent("error",[a])}},m=c.delay,n={ajax:l,status:"",args:[],emitter:e,fireEvent:function(a,b,c){a=n.status=a||n.status,b=n.args=b||n.args,c=c||n.emitter,h.delay(m,function(){"success"==a?c.fire("code",j,b):"fail"==a&&c.fire("code",b[0],b);var d=b.slice(-1)[0];d&&c.fire("status",d.status,b),c.fire(a,b),c.fire("done",b)})}};i.set(this,n);var o=d.Object.filter(c,["done","success","fail","error","code","status"]);this.on(o)}var d=a("$"),e=a("MiniQuery"),f=e.require("Emitter"),g=a("Config"),h=a("Fn"),i=a("Mapper");return c.prototype={constructor:c,get:function(c){var e=i.get(this),f=d.Object.extend({},e.ajax);c&&(f.data=c);var g=a(b,"Ajax");return g.get(f),this},post:function(c,e){var f=i.get(this),g=f.ajax,h=d.Object.extend({},g,{data:c||g.data,query:e||g.query}),j=a(b,"Ajax");return j.post(h),this},done:function(a){return this.on("done",a),this},success:function(a){return this.on("success",a),this},fail:function(a){return this.on("fail",a),this},error:function(a){return this.on("error",a),this},status:function(){var a=[].slice.call(arguments,0);this.on.apply(this,["status"].concat(a))},code:function(){var a=[].slice.call(arguments,0);this.on.apply(this,["code"].concat(a))},on:function(){var a=i.get(this),b=a.emitter,c=[].slice.call(arguments,0);b.on.apply(b,c);var d=a.status;if(d){var e=new f(this);e.on.apply(e,c),a.fireEvent(d,a.args,e),e.destroy()}return this},off:function(){var a=i.get(this),b=a.emitter,c=[].slice.call(arguments,0);return b.off.apply(b,c),this},destroy:function(){var a=i.get(this),b=a.emitter;b.destroy(),i.remove(this)}},c}),D("API/Ajax",function(a){function b(b,c){var d=c.proxy;if(d){var g=a("Proxy");return void g.request(d,c)}var h=[c.url,c.name,c.ext].join(""),i=c.data||null;if(i){var j=c.serialize;i=e.Object.map(i,function(a,b){return"object"==typeof b&&b?j(a,b):b})}var k=f.require("Url");if("post"==b){var l=c.query;l&&(h=k.addQueryString(h,l)),i&&(i=e.Object.toQueryString(i))}else i&&(h=k.addQueryString(h,i),i=null);var m=new XMLHttpRequest;m.open(b,h,!0),m.onreadystatechange=function(){if(4==m.readyState){var b=c.successCode,d=c.error;if(200!=m.status)return void(d&&d(m));var e=a("JSON"),f=e.parse(m.responseText);if(!f)return void(d&&d(m));var g=c.field,h=f[g.code];if(h==b){var i=c.success;i&&i(f[g.data]||{},f,m)}else{var j=c.fail;j&&j(h,f[g.msg],f,m)}}},"post"==b&&m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.send(i)}function c(a){b("get",a)}function d(a){b("post",a)}var e=a("$"),f=a("MiniQuery");return{get:c,post:d}}),D("SSH",function(a,b){function c(a,c){a=a||"",c=g.clone(b.id,c),i.setGuid(this,b);var e=c.prefix,h=new f(this),j=c.successCode,k=c.proxy;"object"==typeof k&&(k=k[a]);var l=d.Object.extend(d.Object.filter(c,["ext","successCode","field","proxy","serialize","eid","openid","appid","pubacckey","timestamp","nonce","pubaccid","data"]),{proxy:k,fullname:e+a,success:function(a,b,c){m.fireEvent("success",[a,b,c])},fail:function(a,b,c,d){m.fireEvent("fail",[a,b,c,d])},error:function(a){m.fireEvent("error",[a])}}),m={ajax:l,status:"",args:[],emitter:h,fireEvent:function(a,b,c){a=m.status=a||m.status,b=m.args=b||m.args,c=c||m.emitter,c.fire("done",b),c.fire(a,b),"success"==a?c.fire("code",j,b):"fail"==a&&c.fire("code",b[0],b.slice(1));var d=b.slice(-1)[0];d&&c.fire("status",d.status,b)}};i.set(this,m)}var d=a("$"),e=a("MiniQuery"),f=e.require("Emitter"),g=a("Config"),h=a("API"),i=a("Mapper");return c.prototype=d.Object.extend(new h,{constructor:c,post:function(c){var e=i.get(this),f=e.ajax,g=a(b,"Server");return g.get({eid:f.eid,appid:f.appid},function(e){var g=d.Object.extend({},f,{data:c||f.data,secret:e.secret,version:e.version,fromTag:e.fromTag,url:e.url}),h=a(b,"Ajax");h.post(g)},f.fail,f.error),this}}),c}),D("SSH/Ajax",function(a){function b(b){var d=a("MD5"),e=b.eid,f=b.fullname,g=b.openid,h=c.Date.format(new q,"yyyy-MM-dd HH:mm:ss"),i=c.String.random(16),k={EID:e,Openid:g,Method:f,Timestamp:h,Ver:b.version,FromTag:b.fromTag,AppID:b.appid,IsNewJson:"Y",IsEncrypt:"N",Sign:d.encrypt(e,b.secret,f,h,i),State:i,CustData:b.data};j.log("CustData: ",b.data);var l={eid:e,openid:b.openid,pubacckey:b.pubacckey,timestamp:b.timestamp,nonce:b.nonce,pubaccid:b.pubaccid},m=a("API"),n=c.Object.filter(b,["ext","successCode","field","url","proxy","serialize"]),o=new m("",n),p=c.Object.filter(b,["success","fail","error"]);return o.on(p),o.post(k,l),o}{var c=a("$");a("MiniQuery")}return{post:b}}),D("SSH/Server",function(a,b){function c(){var a=h.get(b.id),c=a.cache;return c&&("session"==c||"local"==c)?(c=c[0].toUpperCase()+c.slice(1),g.require(c+"Storage")):null}function d(d,e,g,h,k){d=d||{eid:"",appid:""},e=e||{url:"",secret:"",key:"",route:"",version:"",fromTag:""};var l=a("API"),m=a("MD5"),n=a("Config"),o=n.clone(b.id,{url:e.url}),p=new l("",o),r=d.eid,s=f.Date.format(new q,"yyyy-MM-ddhh:mm:ss"),t=f.String.random(16),u=m.encrypt(r,e.secret,s,t);p.get({EID:r,AppID:d.appid||"",AccKey:e.key||"",Timestamp:s,State:t,Sign:u}),p.on("success",function(b,d){var f=a("Url"),h=(d.ServerUrl||"")+e.route;f.checkFull(h)||(h="http://"+h),b={secret:d.AppSecret,version:e.version,fromTag:e.fromTag,url:h},j=[b,d];var k=c();k&&k.set(i,j),g.apply(null,j),o.cache||(j=null)}),p.on("fail",function(a,b,c){h&&h(a,b,c)}),p.on("error",function(){k&&k()})}function e(e,f,g,h){if(e=e||{eid:"",appid:""},f){if(j)return void f.apply(null,j);var k=c();if(k&&(j=k.get(i)))return void f.apply(null,j);var l=a(b,"Config");l.get(function(a){return a?void d(e,a,f,g,h):void(h&&h())})}}var f=a("$"),g=a("MiniQuery"),h=a("Config"),i="__"+b.id+"__",j=null;return{get:e}}),D("SSH/Server/Config",function(a,b){function c(){var a=h.get(b.id),c=a.cache;return c&&("session"==c||"local"==c)?(c=c[0].toUpperCase()+c.slice(1),g.require(c+"Storage")):null}function d(a){var d=h.get(b.id),e=d.url;f.getJSON(e,function(b){try{var e=b.kisplusServerS,f=b.kisplusAppsecret;j={version:b.ver,fromTag:b.fromtag,key:b.AccKey,secret:b.AccSecret,host:e,path:f,route:b.kisplusApiRouter,url:e+f};var g=c();g&&g.set(i,j)}catch(h){j=null}a&&a(j),d.cache||(j=null)})}function e(a){if(a){if(j)return void a(j);var b=c();return b&&(j=b.get(i))?void a(j):void d(a)}}var f=a("$"),g=a("MiniQuery"),h=(g.require("Emitter"),a("Config")),i="__"+b.id+"__",j=null;return{get:e}}),D("SSH.API",function(a,b){function c(a,c){a=a||"",c=g.clone(b.id,c),i.setGuid(this,b);var e=(c.prefix,new f(this)),h=c.successCode,j=c.proxy;"object"==typeof j&&(j=j[a]);var k=d.Object.filter(c,["prefix","eid","openid","proxy","serialize","appid","pubacckey","timestamp","nonce","pubaccid"]),l={name:a,successCode:h,field:c.field,data:c.data||{},ssh:d.Object.extend(k,c.ssh),success:function(a,b,c){m.fireEvent("success",[a,b,c])},fail:function(a,b,c,d){m.fireEvent("fail",[a,b,c,d])},error:function(a){m.fireEvent("error",[a])}},m={ajax:l,status:"",args:[],emitter:e,fireEvent:function(a,b,c){a=m.status=a||m.status,b=m.args=b||m.args,c=c||m.emitter,c.fire("done",b),c.fire(a,b),"success"==a?c.fire("code",h,b):"fail"==a&&c.fire("code",b[0],b.slice(1));var d=b.slice(-1)[0];d&&c.fire("status",d.status,b)}};i.set(this,m)}var d=a("$"),e=a("MiniQuery"),f=e.require("Emitter"),g=a("Config"),h=a("SSH"),i=a("Mapper");return c.prototype=d.Object.extend(new h,{constructor:c,get:function(){throw new r(b.id+" 不支持 get 方式的请求")},post:function(c){var e=i.get(this),f=e.ajax,g=d.Object.extend({},f,{data:c||f.data}),h=a(b,"Ajax");return h.post(g),this}}),c}),D("SSH.API/Ajax",function(a){function b(b){var d=a("SSH"),e=new d(b.name,b.ssh),f=(c.Object.filter(b,["success","fail","error"]),b.success),g=b.fail,h=b.error,i=b.field;e.on({success:function(a,c,d){a||h&&h(d);var e=b.successCode,j=a[i.code];j==e?f&&f(a[i.data]||{},a,d):g&&g(j,a[i.msg],a,d)},fail:function(a,b,c,d){h&&h(d)},error:function(a){h&&h(a)}});var j=b.data;return e.post({openid:b.ssh.openid,Result:"",ErrMsg:"",AccountDB:"",TotalPage:"",CurrentPage:j.pageNo,ItemsOfPage:j.pageSize,Data:c.Object.remove(j,["pageNo","pageSize"])}),e}{var c=a("$");a("MiniQuery")}return{post:b}}),D("Proxy",function(a,b,c){function d(a){var c=l.get(b.id),d=c.delay,e=[].slice.call(arguments,1);m.delay(d,a,e)}function e(a){var b=a.uri,c=n[b];return delete n[b],c}function f(b){var c=a("Url"),d=k.require("Url"),e=c.checkFull(b)?b:c.root()+b;return e=d.randomQueryString(e)}function g(b,c){var d=f(b);n[d]=c;var e=a("Seajs");e.use(d,function(a){i(a,c)})}function h(b,c){var e=f(b),g=new XMLHttpRequest;g.open("get",e,!0),g.onreadystatechange=function(){if(4==g.readyState){if(200!=g.status)return void d(c.error);var b=a("JSON"),e=b.parse(g.responseText);i(e,c)}},g.send(null)}function i(a,b){if(!a)return void d(b.error);var c=b.successCode,e=b.field,f=a[e.code];if(f==c){var g=a[e.data]||{};d(b.success,g,a)}else{var h=a[e.msg]||"";d(b.fail,f,h,a)}}var j=a("$"),k=a("MiniQuery"),l=a("Config"),m=a("Fn"),n={};b.exports=c={request:function(b,c){var d=a("File");if(d.isJs(b))return void g(b,c);if(d.isJson(b))return void h(b,c);throw new r("不支持参数 file 的文件类型: "+b)},response:function(b,c){var d=a("Seajs");d.define(function(a,d,f){if(j.Object.isPlain(b))return b;var g=e(f),h=g.data,i="function"==typeof b?b:c[h[b]];return i?i(h,g)||{}:{}})}}}),D("CloudHome.API",function(a,b){function c(a,c){f.setGuid(this),a=a||"",c=h.clone(b.id,c);var e=new g(this),k=c.delay,l={name:a,field:c.field,status:"",args:[],emitter:e,fireEvent:function(a,b,c){a=l.status=a||l.status,b=l.args=b||l.args,c=c||l.emitter,i.delay(k,function(){"fail"==a&&c.fire("code",b[0],b),c.fire(a,b),c.fire("done",b)})}};j.set(this,l);var m=d.Object.filter(c,["done","success","fail","error","code"]);this.on(m)}var d=a("$"),e=a("MiniQuery"),f=e.require("Mapper"),g=e.require("Emitter"),h=a("Config"),i=a("Fn"),j=new f;return c.prototype={constructor:c,invoke:function(b){var c=j.get(this),d=c.name,e=c.field,f=a("CloudHome.Native");return f.invoke(d,b,function(a){var b="true"==x(a[e.success]).toLowerCase();if(b){var d=a[e.data]||{};return void c.fireEvent("success",[d,a])}var f=a[e.code],g=a[e.msg];c.fireEvent("fail",[f,g,a])}),this},done:function(a){return this.on("done",a),this},success:function(a){return this.on("success",a),this},fail:function(a){return this.on("fail",a),this},code:function(){var a=[].slice.call(arguments,0);this.on.apply(this,["code"].concat(a))},on:function(){var a=j.get(this),b=a.emitter,c=[].slice.call(arguments,0);b.on.apply(b,c);var d=a.status;if(d){var e=new g(this);e.on.apply(e,c),a.fireEvent(d,a.args,e),e.destroy()}return this},off:function(){var a=j.get(this),b=a.emitter,c=[].slice.call(arguments,0);return b.off.apply(b,c),this},destroy:function(){var a=j.get(this),b=a.emitter;b.destroy(),j.remove(this)}},c}),D("CloudHome",function(a){a("$")}),D("CloudHome.Native",function(){function a(a,b,d){"function"==typeof b&&(d=b,b=null),b=n.stringify(b||{}),b=encodeURIComponent(b);var g=d?++c:0;g&&(f[g]=d);var h=["xuntong",a,g,b].join(":"),i=e.createElement("iframe");i.setAttribute("height","1px"),i.setAttribute("width","1px"),i.setAttribute("src",h),e.documentElement.appendChild(i),i.parentNode.removeChild(i),i=null}function b(a,b){var c=f[a];c&&c(b||{})}var c=0,f={};return d.XuntongJSBridge={handleMessageFromXT:b},{invoke:a}}),D("Mask",function(a,b){function c(a){var b=a.div;if(b)return b;var c=a.id,d=a.sample,g=f.String.format(d,{id:c});return f(e.body).append(g),b=a.div=e.getElementById(c)}function d(a){h.setGuid(this),a=j.clone(b.id,a);var c=a.prefix+f.String.random(a.suffix).toLowerCase(),d=new i(this),e={id:c,div:null,sample:a.sample,"volatile":a["volatile"],emitter:d,hasBind:!1,style:f.Object.filter(a,["opacity","top","bottom","background","z-index"])};k.set(this,e)}var f=a("$"),g=a("MiniQuery"),h=g.require("Mapper"),i=g.require("Emitter"),j=a("Config"),k=new h;return d.prototype={constructor:d,show:function(a){var b=k.get(this),d=b["volatile"],e=this,g=c(b);b.hasBind||(b.hasBind=!0,d&&f(g).on("click",function(){if(d===!0||"hide"==d)return void e.hide();throw"remove"==d&&e.remove(),new r('配置字段 volatile 的取值只能为 true|false|"hide"|"remove"')})),f(g).css(b.style).show(),b.emitter.fire("show"),a&&l(function(){e.hide()},a)},hide:function(){var a=k.get(this),b=a.div;b&&(f(b).hide(),a.emitter.fire("hide"))},remove:function(){var a=k.get(this),b=a.div;b&&(a.div=null,a.hasBind=!1,e.body.removeChild(b),a.emitter.fire("remove"))},on:function(){var a=k.get(this),b=a.emitter,c=[].slice.call(arguments,0);b.on.apply(b,c)}},d}),D("Navigator",function(a,b){function c(a){g.setGuid(this);var b=a.hash,c=f.require("Emitter"),i=new c(this),j={emitter:i,statcks:[],quiet:!1,hash:b};if(h.set(this,j),b){var k=this,l=f.require("Url");l.hashchange(d,function(a,b){i.fire("hashchange",[a,b]);var c=j.quiet;return c?void(j.quiet=!1):void k.back()})}var m=e.Object.filter(a,["back","change","beforechange","hashchange"]);this.on(m);var n=a.current;n&&this.to(n)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=new g;c.prototype={constructor:c,on:function(){var a=h.get(this),b=a.emitter,c=[].slice.call(arguments,0);b.on.apply(b,c)},to:function(a){var b=h.get(this),c=b.emitter,g=b.statcks,i=g.slice(-1)[0];i&&(c.fire("beforechange",i),c.fire("beforechange",[i])),g.push(a);var j=[].slice.call(arguments,0);c.fire("change",a,j.slice(1)),c.fire("change",j);var k=b.hash;if(k=k?"function"==typeof k?k.call(this,a):"string"==typeof k?k+a:k===!0?e.String.random():!1:!1){b.quiet=!0;var l=f.require("Url");l.setHash(d,k)}},back:function(){var a=h.get(this),b=a.emitter,c=a.statcks,d=c.length-1;if(0!=d){var e=c.pop(),f=c[d-1];b.fire("back",[e,f])}},current:function(){var a=h.get(this),b=a.statcks;return b.slice(-1)[0]}},b.exports=c}),D("Scroller/pull",function(a){a("$");return function(a){var b=0,c=!1,d="pulldown",e=0,f=0,g=a.emitter,h=a.scroller;h.on("scrollStart",function(){b=0;var g=this.directionY,i=this.distY;if(c=0==g?0>i:g>0,d=c?"pullup":"pulldown",this.isWaitingForManualReset=!1,c){var j=h.maxScrollY,k=a.pullup;e=k.min-j,f=k.max-j}else{var l=a.pulldown;e=l.min,f=l.max}}),h.on("scroll",function(){var a=this.y;c&&(a=-a),e>a?0==(1&b)&&(b=1,g.fire(d,"start")):a>=e&&f>a?0==(2&b)&&(b=2,g.fire(d,"enter")):a>=f&&0==(4&b)&&(b=4,g.fire(d,"reach"))}),h.on("beforeScrollEnd",function(){j.log(d),4==(4&b)?(this.isWaitingForManualReset=!0,g.fire(d,"release")):g.fire(d,"start")})}}),D("Scroller",function(a,b){function c(a,c){function e(){var a=f.hasHorizontalScroll,b=f.hasVerticalScroll,c=n.length;return 1==c&&(a||b)||2==c&&a&&b}h.setGuid(this),c=j.clone(b.id,c);var f=new g(a,c),m=new i(this),n=d.Array.keep(f.indicators,function(a){return a=d(a.indicator),a.hide(),a}),o={emitter:m,scroller:f,indicators:n,pulldown:{},pullup:{},hasBindPull:!1};k.set(this,o),f.on("scroll",function(){this.hasVerticalScroll||this._translate(0,.5*this.distY>>0)});var p=null,q=!1;f.on("scrollStart",function(){q=!0,clearTimeout(p),e()&&d.Array.each(n,function(a){a.css("opacity",1),a.show()})}),f.on("scrollEnd",function(){q=!1,p=l(function(){e()&&d.Array.each(n,function(a){a.fadeOut("fast",function(){q&&(a.css("opacity",1),a.show())})})},100)})}var d=a("$"),f=a("MiniQuery"),g=a("IScroll"),h=f.require("Mapper"),i=f.require("Emitter"),j=a("Config"),k=new h;return e.addEventListener("touchmove",function(a){a.preventDefault()},!1),c.prototype={constructor:c,on:function(){var a=k.get(this),b=a.emitter,c=(a.scroller,[].slice.call(arguments,0));b.on.apply(b,c)},refresh:function(){var a=k.get(this),b=a.scroller,c=a.indicators,e=[].slice.call(arguments,0);b.refresh.apply(b,e),d.Array.each(c,function(a){a.hide()})},reset:function(){var a=k.get(this),b=a.scroller;b.isWaitingForManualReset=!1,b.resetPosition(b.options.bounceTime)},pulldown:function(c){var d=k.get(this);if("number"==typeof c&&(c={min:c,max:arguments[1]}),d.pulldown=c,!d.hasBindPull){var e=a(b,"pull");e(d),d.hasBindPull=!0}},pullup:function(c){var d=k.get(this);if("number"==typeof c&&(c={min:c,max:arguments[1]}),d.pullup=c,!d.hasBindPull){var e=a(b,"pull");e(d),d.hasBindPull=!0}},to:function(a){var b=k.get(this),c=b.scroller,d=c.options;c.scrollTo(0,a,d.bounceTime,d.bounceEasing)},toBottom:function(a){var b=k.get(this),c=b.scroller,d=c.options,e=c.maxScrollY;a=e-a,c.scrollTo(0,a,d.bounceTime,d.bounceEasing)},destroy:function(){var a=k.get(this),b=a.scroller;b.destroy();var c=a.emitter;c.destroy(),k.remove(this)},get:function(a){var b=k.get(this),c=b.scroller;return c[a]},call:function(a){var b=k.get(this),c=b.scroller,d=[].slice.call(arguments,1);return c[a].apply(c,d)},apply:function(a,b){var c=k.get(this),d=c.scroller;return d[a].apply(d,b)}},c}),D("Template",function(a,b){function c(a,b,g){if(f.Object.isPlain(a))return g=b,void f.Object.each(a,function(a,b){c(a,b,g)});if("string"==typeof a){var i=a;0==i.indexOf("#")&&(i=i.slice(1)),a=e.getElementById(i)}var j=d(a);a.innerHTML=b instanceof o?f.Array.keep(b,function(a,b){return g&&(a=g(a,b)),h(j,a)}).join(""):h(j,b)}function d(a){var c;"string"==typeof a?(c=a,0==c.indexOf("#")&&(c=c.slice(1)),a=e.getElementById(c)):(c=a.id,c||(c=a.getAttribute(j),c||(c=a.tagName.toLowerCase()+"-"+f.String.random(),a.setAttribute(j,c))));var d=i[c];if(!d){var h=g.get(b.id),k=h.tag;i[c]=d=f.String.between(a.innerHTML,k.begin,k.end)}return d}var f=a("$"),g=a("Config"),h=f.String.format,i={},j="data-template-id-"+f.String.random(4).toLowerCase();return{fill:c,get:d}}),D("jquery-plugin/touch",function(a){function b(a,b){var d=!1;return"function"==typeof a?(b=a,c(this).on({touchmove:function(){d=!0},touchend:function(){if(d)return void(d=!1);var a=[].slice.call(arguments,0);b.apply(this,a)}})):c(this).delegate(a,{touchmove:function(){d=!0},touchend:function(){if(d)return void(d=!1);var a=[].slice.call(arguments,0);b.apply(this,a)}})}var c=a("$");return c.Object.extend(c.fn,{touch:b}),c}),C.expose({$:!0,MiniQuery:!0,API:!0,Proxy:!0,Edition:!0,Url:!0,Module:!0,Mapper:!0,Mask:!0,Navigator:!0,Scroller:!0,Template:!0,"jquery-plugin/touch":!0,SSH:!0,"SSH.API":!0,"CloudHome.API":!0,CloudHome:!0,"CloudHome.Native":!0,"SSH/Server":!0,"SSH/Server/Config":!0}),D("defaults",{Url:{root:f.origin+f.pathname.split("/").slice(0,-1).join("/")+"/",replacer:{root:"~",edition:"@"}},Module:{seperator:"/",crossover:!1},API:{successCode:200,field:{code:"code",msg:"msg",data:"data"},delay:!1,serialize:function(a,b){var c=E("$"),d=c.Object.toJson(b);return encodeURIComponent(d)}},Proxy:{delay:{min:500,max:3e3}},Template:{tag:{begin:"<!--",end:"-->"}},Scroller:{scrollbars:!0,shrinkScrollbars:"scale",preventDefault:!1,probeType:2},"SSH/Server/Config":{url:"http://mob.cmcloud.cn/kisplus/kisplusconfig.aspx?callback=?",cache:"session"},"SSH/Server":{ext:"",successCode:200,field:{code:"Result",msg:"ErrMsg",data:"Data"},cache:"session"},SSH:{ext:"",successCode:200,field:{code:"Result",msg:"ErrMsg",data:"DataJson"},proxy:{},eid:"",openid:"",appid:"",pubacckey:"",timestamp:"",nonce:"",pubaccid:"",data:null},"SSH.API":{successCode:200,field:{code:"Result",msg:"ErrMsg",data:"Data"},proxy:{},eid:"",openid:"",appid:"",pubacckey:"",timestamp:"",nonce:"",pubaccid:"",data:null},"CloudHome.API":{field:{success:"success",code:"errorCode",msg:"error",data:"data"},delay:!1},Mask:{prefix:"div-kisp-mask-",suffix:8,sample:'<div id="{id}" class="kisp mask"></div>',"volatile":!1}}),function(b){var c=b("KISP"),d=b("defaults");c.config(d),a.KISP=c,c.modules=C.modules(),c.exposes=C.exposes(),delete a.$,delete a.MiniQuery}(C.require)}(window,top,parent,window,document,location,navigator,window.localStorage,window.sessionStorage,window.console,history,setTimeout,setInterval,window.JSON,Array,Boolean,Date,Error,Function,Math,Number,Object,RegExp,String,$,MiniQuery,IScroll);