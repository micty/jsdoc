

##3.JavaScript 命名规范
命名对 JavaScript 代码可读性至关重要，良好的命名风格能极大提高代码阅读者理解代码的速度。在业界中，JavaScrip t的命名没有统一的规范，即使是几个流行的框架，如 jQuery、ExtJs、Backbone，命名风格也不尽一致，尽管如此，一些共有的约定俗成的规范还存在的，我们也应当遵守并保持习惯。

###3.1 标识符命名
JavaScript 中的标识符的命名规则
- 以字母、下划线 `_` 或美元符号 `$` 开头
- 允许名称中包含字母，数字，下划线 `_` 和美元符号 `$`
- 区分大小写

###3.2推荐的命名规范

####3.2.1变量名
变量名尽量采用有意义的英文单词或缩写命名，不要用拼音。某些特殊的业务模块，可考虑采用拼音或拼音缩写，但应该尽量减少这种情况的发生。

函数命名应尽量以动词开头，并能体现函数完成的功能。类名（构造函数）、模块名、命名空间则以名词开头，表示是一个什么样的事物。

由于 JavaScript 是一种弱类型语言，在一些团队里，由于历史原因，特别是习惯写 C++ 的人，喜欢给变量名加一个前缀表示变量的数据类型，此种命名方式叫匈牙利命名法。匈牙利命名法是一位微软程序员发明的，多数的 C 和 C++ 程序都使用此命名法。

本规范不推荐匈牙利命名法，因为它并没有发挥 JavaScript 动态语言的特性，即使同一个变量名，也可以使用在不同环境里，具有不同的数据类型。强制给变量名加上表示数据类型的前缀，既没必要，更影响代码阅读者的视线，起到干扰的作用。

良好的命名风格即可预示着变量的作用，更可暗示它的数据类型。

####3.2.2大小写
变量、参数、成员变量、函数等名称均以小写字母开头；
命名空间、模块、构造器的名称以大写字母开头；

####3.2.3单词组合
多个单词组合的采用采用首字母小写，其它单词首字母大写的驼峰式命名，尽量不要使用下划线连接符。如：

``` javascript

//推荐
var userName = 'Nicholas';
function addYears() {

}

//不推荐
var user_name = 'Nicholas';
function add_years() {

}

```

####3.2.4下划线
**原则：尽量减少下划线的使用；内部变量命名禁止以下划线开头。**

某些特殊情况下，当一个模块/对象不得不暴露一个私有成员时（如为了方便调试），为了表示区分与警告，应以下划线开头，但应尽量减少这种情况的发生。如果你的代码逻辑要暴露过多的以下划线开头的成员，请重新审查你的设计模式，肯定有改善的空间，比如可以改成使用内部使用的辅助工具类来存取私有成员数据。

``` javascript

//不推荐
function fn() {
    var _age = 20;          //不需要下划线
    var name_ = 'Nicholas'; //不需要下划线
}


//推荐
function fn() {
    var age = 20;
    var name = 'Nicholas';

    return {
        name: name, //公共成员，正常暴露
        _age: age   //不得不暴露私有成员时，必须以下划线开头
    };
}
    
```

某些场景下需要以下划线开头，如后台接口返回的全局变量或通过后台生成的JS数据文件，必须以全局变量出现时，就必须以下划线开头，这样可以尽可能的减少数据产生的全局变量与业务代码的冲突。假设有一个后台程序会在每天夜里定时运行，扫描业务数据库并按一定格式生成 JS 数据文件，推荐的顶级变量命名方式为：分别以两个下划线开头和结束。如：


``` javascript

//推荐
//后台程序生成的 JS 数据文件格式
//增加一个全局变量，是一个数据，分别以两个下划线开头和结束
var __data__ = [ 

    //...

];

//推荐
var __data__ = {

    //...

};

//推荐
//后台接口返回的 JSON-P 格式
__callback__({ //业务代码必须已定义一个名为 __callback__ 的函数

    //...
});
    
```


####3.2.5美元符号 `$`
以美元符号 `$` 开头的变量习惯于标识系统相关，比如系统进程等，应该尽量在业务代码中使用，jQuery框架的命名空间除外。

在这里推荐一种使用$符号的情况，在 JavaScript 中，经常会遇到使用一个 `Object` 对象 `{…}` 来存储一个 `key` 及其对应的 `value`，使用时再根据`key` 取出它的 `value`。这是 JavaScript 内置实现的一个 `hash` 存储机制，非常好用，应尽量使用它，我们把它称为一个 `map`。

在 JavaScript 中，检索数组的时间复杂度为 O(n)，而检索 `Object` 的时间复杂度为O(1)，随着 `n`的增大，通过 `Object` 存储数据的优势就体现出来了。为了更清晰的表示出该 `Object` 的 `map` 的结构，推荐使用以下格式：`key$value = {}`;

假如需要动态建立起一个用户列表集合，通过 `id` 唯一确定一个 `user` 值，可以定义该 `map` 为：


``` javascript

//推荐使用的 key-value 集合表示法
var id$user = {
    1000: { name: 'Micty', age: 30 },
    1001: { name: 'Nicholas', age: 30 },
    1002: { name: 'Bill', age: 30 }
    //...
};

//取出 id 为 1001 的值
var id = 1001;
var user = id$user[id];
    
```

以下是在一个框架里使用的示例：


``` javascript

//一对一的关系
var name$data = {};         //维护 { className: data } 这样的原始集合
var name$superName = {};    //维护 { className: 直接父类 className } 的关系
var xtype$superXtype = {};  //维护 { xtype: 直接父类 xtype } 的关系
var xtype$name = {};        //维护 { xtype: className } 的关系
var name$class = {};        //维护 { className: constructor} 的关系，对 singleton 的特别有用
var name$config = {};       //维护 { className: 自上而下合并后的 config } 的关系，实现字段继承

//一对多的关系
var name$childNames = {};   //维护 { clasName: [直接子类className] } 的关系
var xtype$childXtypes = {}; //维护 { xtype: [直接子类xtype] } 的关系
    
```

通过 `key$value` 的命名方式可以很清晰的理解该 `map` 的作用。

###3.3一些常见的命名场景
变量命名有时是一件挺头疼的事，毕竟要创造出一个合适的名字并不是一件简单的事，但也不必拘泥于规范中的条条框框限制，可根据代码环境作适当变通。当逻辑比较简单明了，代码比较清晰时，可以使用一些简单的名称来表示，如数组的可以用 `var list` 或 `var a` 来表示；函数的可以用 `var fn` 来表示；对象的可以用 `var obj` 来表示。简单明了的命名有时能起到简化代码逻辑效果。

####3.3.1数组
数组是一个复数，可以在单数变量后加s表示是复数；也可以直接简单用 `var list` 来表示；甚至在某些足够简单的上下文里，可以直接用 `var a` 来表示。如：

``` javascript

//推荐的复数命名方式
var ids = [];   //表示 id 的集合
var events = [];//表示事件的集合

var list = [];  //表示一个列表集合，用在语义很明确的环境里
var a = [];     //表示一个数组，用在代码逻辑足够简单的环境里
    
```

####3.3.2函数
函数命名应尽量以动词开头，并能体现函数完成的功能。在参数里、函数内部，在不引起歧义的情况下，可以简单的以fn来表示一个函数，如：


``` javascript

//推荐。 函数作为简单的参数时的命名
function doSomthing(fn) {
    //...
    fn(); //回调
}

//推荐。 函数引用自身时的命名
function doSomthing() {
    var fn = arguments.callee; //引用自身
    //...
}
    
```

下面列举一些常用的命名：
- 转换数据类型的，以 `to` 开头，如 `toString`、`toUtf8`、`toArray`、`toObject` 等；
- 解析数据的为` parse`；
- 初始化的为 `initialize` 或 `init`；
- 查找的为 `find`；
- 格式化的为 `format`；
- 过滤的为 `grep`；
- 判断结果为 `bool` 值的有 `contains`、`startsWith`、`endsWith`、`exits` 等；
- 渲染 UI 的为 `render`；
- 常见的成对的动词有 `get`/`set`、`add`/`remove`、`create`/`destroy`、`start`/`stop`、`begin`/`end`、`on`/`off`、`bind`/`unbind`、`next`/`previous`；

####3.3.3对象
对象的命名应该是一个名词，复数的情况可以在后面加s来表示。在某些简单上下文里，可以直接用 `var obj` 来表示。

在类的内部，当要用局部变量来引用this变量时，推荐使用self命名，如：

``` javascript

var self = this;
    
```

####3.3.4模块
模块是一个比库还小的概念，而一个框架可能包含几个库。模块更适合对业务代码进行划分与组织，从逻辑上清晰的表达业务功能的结构与层次。

JavaScript 里没有严格的“模块”的定义，所有的模块的实现，只是通过一个闭包函数来返回一个暴露了一些成员的 `Object` 对象。本规范推荐模块命名以大写字母开头，如：

``` javascript

//推荐。 模块的命名，以大写字母开头
var ClassManager = (function () {

    //some code...

    //ClassManager = 
    return {

        //...
    };
})();
    
```

----------------------------------------------------------------------------------